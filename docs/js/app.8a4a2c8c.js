(function(t){function e(e){for(var o,r,i=e[0],c=e[1],l=e[2],u=0,g=[];u<i.length;u++)r=i[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&g.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(g.length)g.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(o=!1)}o&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},n={app:0},s=[];function r(t){return i.p+"js/"+({about:"about"}[t]||t)+"."+{about:"d905ed25"}[t]+".js"}function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(t){var e=[],a=n[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=n[t]=[e,o]}));e.push(a[2]=o);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=r(t);var l=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(u);var a=n[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",l.name="ChunkLoadError",l.type=o,l.request=s,a[1](l)}n[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"36ba":function(t,e,a){"use strict";var o=a("c2af"),n=a.n(o);n.a},"5c0b":function(t,e,a){"use strict";var o=a("9c0c"),n=a.n(o);n.a},8480:function(t,e,a){},"9c0c":function(t,e,a){},c2af:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"hero-head"},[a("nav",{staticClass:"main-nav navbar "},[a("div",{staticClass:"container"},[a("div",{staticClass:"navbar-start"},[t._m(0),a("a",{staticClass:"navbar-item is-active",on:{click:function(e){return t.$modal.push("config")}}},[t._v("Config")])]),a("div",{staticClass:"navbar-end navbar-menu"},[a("a",{staticClass:"navbar-item",attrs:{href:"//github.com/kota-matsui-edi/toggl-backlog-aggregator",target:"_blank"}},[a("font-awesome-icon",{attrs:{icon:["fab","github"]}})],1)])])])]),a("div",{staticClass:"container"},[a("router-view")],1),a("modal",{attrs:{name:"config"}},[a("config")],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"navbar-item",attrs:{href:"https://jenil.github.io/bulmaswatch/"}},[a("h1",{staticClass:"title is-5"},[t._v("Toggl-backlog-aggregator")])])}],r=a("d4ec"),i=a("262e"),c=a("2caf"),l=a("9ab4"),u=a("60a3"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"config"},[t._m(0),a("section",{staticClass:"modal-card-body"},[a("div",{staticClass:"columns"},[a("div",{staticClass:"column"},[a("div",{staticClass:"section"},[a("h2",{staticClass:"title"},[t._v(" Toggl ")]),a("div",{staticClass:"field"},[t._m(1),a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.togglApiToken,expression:"togglApiToken"}],staticClass:"input",attrs:{type:"text",placeholder:"abcdefghijklmn "},domProps:{value:t.togglApiToken},on:{input:function(e){e.target.composing||(t.togglApiToken=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("Workspace ID")]),a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.toggleWorkSpaceId,expression:"toggleWorkSpaceId"}],staticClass:"input",attrs:{type:"text",placeholder:"123456"},domProps:{value:t.toggleWorkSpaceId},on:{input:function(e){e.target.composing||(t.toggleWorkSpaceId=e.target.value)}}})])])])]),a("div",{staticClass:"column"},[a("div",{staticClass:"section"},[a("h2",{staticClass:"title"},[t._v(" Backlog ")]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("workspace URL")]),a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.backlogWorkSpaceURL,expression:"backlogWorkSpaceURL"}],staticClass:"input",attrs:{type:"text",placeholder:"https://xx.backlog.com"},domProps:{value:t.backlogWorkSpaceURL},on:{input:function(e){e.target.composing||(t.backlogWorkSpaceURL=e.target.value)}}})])]),a("div",{staticClass:"field"},[a("label",{staticClass:"label"},[t._v("API token")]),a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.backlogApiToken,expression:"backlogApiToken"}],staticClass:"input",attrs:{type:"text",placeholder:"abcdefghijklmn "},domProps:{value:t.backlogApiToken},on:{input:function(e){e.target.composing||(t.backlogApiToken=e.target.value)}}})])])])])]),a("div",{staticClass:"section"},[a("h2",{staticClass:"title"},[t._v(" Common ")]),a("label",{staticClass:"label"},[t._v("period")]),a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"input",attrs:{type:"number",placeholder:"2019"},domProps:{value:t.year},on:{input:function(e){e.target.composing||(t.year=e.target.value)}}})]),a("p",{staticClass:"control"},[a("span",{staticClass:"select"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.period,expression:"period"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.period=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"former"}},[t._v("上期")]),a("option",{attrs:{value:"later"}},[t._v("下期")]),a("option",{attrs:{value:"year"}},[t._v("通年")])])])])]),a("div",{staticClass:"field"},[a("p",{staticClass:"control"},[a("label",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.useLocalStorage,expression:"useLocalStorage"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.useLocalStorage)?t._i(t.useLocalStorage,null)>-1:t.useLocalStorage},on:{change:function(e){var a=t.useLocalStorage,o=e.target,n=!!o.checked;if(Array.isArray(a)){var s=null,r=t._i(a,s);o.checked?r<0&&(t.useLocalStorage=a.concat([s])):r>-1&&(t.useLocalStorage=a.slice(0,r).concat(a.slice(r+1)))}else t.useLocalStorage=n}}}),t._v(" use local storage. ")])])])])]),a("footer",{staticClass:"modal-card-foot"},[a("button",{staticClass:"button is-primary",on:{click:t.submit}},[t._v("OK")])])])},g=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"modal-card-head"},[a("p",{staticClass:"modal-card-title"},[t._v("Config")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("label",{staticClass:"label"},[t._v("API token "),a("a",{attrs:{href:"https://www.toggl.com/app/profile",target:"_blank",rel:"noopener noreferrer"}},[t._v("*ref.")])])}],h=a("bee2"),d=function(){function t(){Object(r["a"])(this,t)}return Object(h["a"])(t,[{key:"useLocalStorage",set:function(t){window.localStorage.useLocalStorage=t?"on":"off"},get:function(){var t=window.localStorage.useLocalStorage;return"on"===t}}],[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}(),v=d.instance,f=v,m=(a("a4d3"),a("e01a"),a("99af"),a("4160"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("d3b7"),a("2532"),a("159b"),a("ddb0"),a("96cf"),a("1da1")),k=a("ade3"),b=a("5530"),y=a("6fc5"),_=a("2f62"),j=a("bfa9");o["a"].use(_["a"]);var w=new j["a"]({storage:f.useLocalStorage?window.localStorage:window.sessionStorage,key:"toggl-backlog-aggregator-state"});var C=new _["a"].Store({plugins:[w.plugin]}),O=C,R=a("bc3a"),D=a.n(R),T=(a("b680"),a("ac1f"),a("1276"),a("498a"),function(){function t(e){Object(r["a"])(this,t),this.backlogData=null,this.raw=e}return Object(h["a"])(t,[{key:"users",get:function(){var t=[];return this.raw.forEach((function(e){var a=e.user;t.includes(a)||t.push(a)})),t}},{key:"userDulation",get:function(){var t={};return this.raw.forEach((function(e){t[e.user]?t[e.user]+=e.dur:t[e.user]=e.dur})),t}},{key:"totalDuration",get:function(){var t=this,e=0;return this.users.forEach((function(a){e+=t.userDulation[a]||0})),e}},{key:"backlogProjectName",get:function(){return this.raw[0]?1===this.raw[0].description.split("-").length?"-":this.raw[0].description.split("-")[0].trim():""}},{key:"timeOver",get:function(){return!!this.backlogData&&this.totalDuration/1e3/3600>Number(this.backlogData.estimatedHours)}},{key:"timeOverTwice",get:function(){return!!this.backlogData&&this.totalDuration/1e3/3600>2*Number(this.backlogData.estimatedHours)}},{key:"noEstimatedHours",get:function(){return!this.backlogData||!this.backlogData.estimatedHours}},{key:"backlogProjectID",get:function(){var t=this.raw[0].description.split("-")[1];return t?t.split(" ")[0].trim():"-"}},{key:"backlogURL",get:function(){return"-"===this.backlogProjectName||"-"===this.backlogProjectID?null:"https://ediplex.backlog.jp/view/".concat(this.backlogProjectName,"-").concat(this.backlogProjectID)}},{key:"parentURL",get:function(){return"this"===this.parent?null:"https://ediplex.backlog.jp/view/".concat(this.parent)}},{key:"parent",get:function(){return this.backlogData?this.backlogData.parentIssueId?this.backlogData.parentIssueId:"this":"-"}},{key:"ninnichi",get:function(){return(this.totalDuration/1e3/3600).toFixed(1)+"時間"}}]),t}()),S="backlog",L=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.workSpaceURL="",t.type="details",t.request={},t.apiToken="",t.response=null,t.loading=!1,t}return Object(h["a"])(a,[{key:"setRequest",value:function(t){this.request=t}},{key:"updateRequest",value:function(t){Object.assign(this.request,t)}},{key:"setApiToken",value:function(t){this.apiToken=t}},{key:"setResponse",value:function(t){this.response=t}},{key:"setAllState",value:function(t){Object.assign(this,t)}},{key:"setLoading",value:function(t){this.loading=t}},{key:"setWrokSpaceURL",value:function(t){this.workSpaceURL=t}},{key:"recover",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[S],a&&this.setAllState(a);case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"refleshAuth",value:function(){var t=this;this.setLoading(!0),D.a.get("https://Backlog.com/reports/api/v2/details",{headers:{Authorization:"Basic ".concat(btoa(this.apiToken+":api_token"))},params:this.request}).then((function(e){t.setResponse(e.data)})).catch((function(e){throw t.setResponse(null),e})).finally((function(){t.setLoading(!1)}))}},{key:"fetchSpace",value:function(){var t=this;this.setLoading(!0),this.workSpaceURL&&this.apiToken&&D.a.get(this.workSpaceURL+"/api/v2/space",{params:{apiKey:this.apiToken}}).then((function(e){t.setResponse(e.data)})).catch((function(e){throw t.setResponse(null),e})).finally((function(){t.setLoading(!1)}))}},{key:"getResponse",get:function(){return this.response}},{key:"getRequest",get:function(){return this.request}},{key:"getApiToken",get:function(){return this.apiToken}},{key:"getLoading",get:function(){return this.loading}},{key:"getWorkSpaceURL",get:function(){return this.workSpaceURL}}]),a}(y["d"]);Object(l["a"])([y["c"]],L.prototype,"setRequest",null),Object(l["a"])([y["c"]],L.prototype,"updateRequest",null),Object(l["a"])([y["c"]],L.prototype,"setApiToken",null),Object(l["a"])([y["c"]],L.prototype,"setResponse",null),Object(l["a"])([y["c"]],L.prototype,"setAllState",null),Object(l["a"])([y["c"]],L.prototype,"setLoading",null),Object(l["a"])([y["c"]],L.prototype,"setWrokSpaceURL",null),Object(l["a"])([y["a"]],L.prototype,"recover",null),Object(l["a"])([y["a"]],L.prototype,"refleshAuth",null),Object(l["a"])([y["a"]],L.prototype,"fetchSpace",null),L=Object(l["a"])([Object(y["b"])({dynamic:!0,store:O,name:S,namespaced:!0})],L);var P=Object(y["e"])(L),x="toggl",A=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){var t;return Object(r["a"])(this,a),t=e.apply(this,arguments),t.type="details",t.request={user_agent:"ediplex",workspace_id:""},t.apiToken="",t.response=[],t.loading=!1,t.year="2019",t.period="former",t.backlogResponse={},t.stop=!1,t}return Object(h["a"])(a,[{key:"setRequest",value:function(t){this.request=t}},{key:"updateRequest",value:function(t){Object.assign(this.request,t)}},{key:"setApiToken",value:function(t){this.apiToken=t}},{key:"setResponse",value:function(t){this.response=t}},{key:"setAllState",value:function(t){Object.assign(this,t)}},{key:"setLoading",value:function(t){!0===this.loading&&!1===t&&(this.stop=!1),this.loading=t}},{key:"setYear",value:function(t){this.year=t}},{key:"setPeriod",value:function(t){this.period=t}},{key:"activateInstance",value:function(t){for(var e in t)for(var a in t[e])if(t[e][a]){var o=t[e][a],n=new T(o.raw);n.backlogData=o.backlogData,this.formattedData[e][a]=n}}},{key:"addBacklogResponse",value:function(t){this.backlogResponse=Object(b["a"])({},this.backlogResponse,Object(k["a"])({},t.project,Object(b["a"])({},this.backlogResponse[t.project],Object(k["a"])({},t.id,t.value))))}},{key:"stopFetch",value:function(){this.stop=!0}},{key:"recover",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e[x],a&&(this.setAllState(a),this.activateInstance(a.formattedData));case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"doRequest",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,a,o,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=function(){return s=Object(m["a"])(regeneratorRuntime.mark((function t(e,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(o),console.log("start callEachPage"),o.updateRequest({page:e}),t.next=5,new Promise((function(t){return setTimeout(t,1e3)}));case 5:D.a.get("https://toggl.com/reports/api/v2/details",{headers:{Authorization:"Basic ".concat(btoa(o.apiToken+":api_token"))},params:o.request}).then((function(t){console.log(t),a+=t.data.per_page;var s=t.data.total_count;o.setResponse(o.response.concat(t.data.data)),o.stop&&o.setLoading(!1),s>a?n(e+1,a):o.setLoading(!1)})).catch((function(t){throw o.setResponse([]),o.setLoading(!1),t}));case 6:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)},n=function(t,e){return s.apply(this,arguments)},this.setLoading(!0),this.updateRequest({since:this.since,until:this.until}),this.setResponse([]),e=1,a=0,o=this,n(e,a);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"fetchBacklogStatus",value:function(){var t=Object(m["a"])(regeneratorRuntime.mark((function t(){var e,a,o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("fetchBacklogStatus"),this.setLoading(!0),t.t0=regeneratorRuntime.keys(this.projects);case 3:if((t.t1=t.t0()).done){t.next=19;break}e=t.t1.value,t.t2=regeneratorRuntime.keys(this.projects[e]);case 6:if((t.t3=t.t2()).done){t.next=17;break}return a=t.t3.value,o=this.projects[e][a],console.log(o),t.next=12,N(e,o).catch((function(t){console.warn(t)}));case 12:n=t.sent,console.log(n),n&&this.addBacklogResponse({project:e,id:o,value:n}),t.next=6;break;case 17:t.next=3;break;case 19:this.setLoading(!1);case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"since",get:function(){switch(this.period){case"former":return"".concat(this.year,"-04-01");case"later":return"".concat(this.year,"-09-01");case"year":return"".concat(this.year,"-04-01")}}},{key:"until",get:function(){switch(this.period){case"former":return"".concat(this.year,"-08-31");case"later":return"".concat(Number(this.year)+1,"-03-31");case"year":return"".concat(Number(this.year)+1,"-03-31")}}},{key:"requestURL",get:function(){switch(this.type){case"base":return"https://toggl.com/reports/api/v2";case"details":return"https://toggl.com/reports/api/v2/details";case"summary":return"https://toggl.com/reports/api/v2/summary";case"weekly":return"https://toggl.com/reports/api/v2/weekly"}}},{key:"getRequest",get:function(){return this.request}},{key:"getResponse",get:function(){return this.response}},{key:"getApiToken",get:function(){return this.apiToken}},{key:"getLoading",get:function(){return this.loading}},{key:"users",get:function(){if(this.loading)return[];var t=[];for(var e in this.formattedData)for(var a in this.formattedData[e]){var o=this.formattedData[e][a];o.users.forEach((function(e){t.includes(e)||t.push(e)}))}return t}},{key:"formattedData",get:function(){var t=this;if(this.loading)return{};var e={noProject:{}};return this.response.map((function(t){return new T([t])})).forEach((function(a){"-"!==a.backlogProjectID||"-"!==a.backlogProjectName?(e[a.backlogProjectName]||(e[a.backlogProjectName]={}),e[a.backlogProjectName][a.backlogProjectID]?e[a.backlogProjectName][a.backlogProjectID].raw.push(a.raw[0]):e[a.backlogProjectName][a.backlogProjectID]=a,e[a.backlogProjectName][a.backlogProjectID].backlogData=t.backlogResponse[a.backlogProjectName]?t.backlogResponse[a.backlogProjectName][a.backlogProjectID]:null):e.noProject[a.raw[0].description]?e.noProject[a.raw[0].description].raw.push(a.raw[0]):e.noProject[a.raw[0].description]=a})),e}},{key:"projects",get:function(){var t={};return this.response.map((function(t){return new T([t])})).forEach((function(e){"-"===e.backlogProjectID&&"-"===e.backlogProjectName||(t[e.backlogProjectName]||(t[e.backlogProjectName]=[]),t[e.backlogProjectName].includes(e.backlogProjectID)||t[e.backlogProjectName].push(e.backlogProjectID))})),t}},{key:"getYear",get:function(){return this.year}},{key:"getPeriod",get:function(){return this.period}},{key:"totalTime",get:function(){if(this.loading)return{estimation:{complete:0,uncomplete:0},achieve:{complete:0,uncomplete:0}};var t={estimation:{complete:0,uncomplete:0},achieve:{complete:0,uncomplete:0}};for(var e in this.formattedData)for(var a in this.formattedData[e])if(this.formattedData[e][a]){var o=this.formattedData[e][a];o.backlogData&&"完了"===o.backlogData.status.name?(t.estimation.complete=t.estimation.complete+o.backlogData.estimatedHours,t.achieve.complete=t.achieve.complete+o.totalDuration/1e3/3600):o.backlogData&&(t.estimation.uncomplete=t.estimation.uncomplete+o.backlogData.estimatedHours,t.achieve.uncomplete=t.achieve.uncomplete+o.totalDuration/1e3/3600)}return t}},{key:"totalTimeByUser",get:function(){var t=this,e={};return this.users.forEach((function(a){var o={estimation:{complete:0,uncomplete:0},achieve:{complete:0,uncomplete:0}};for(var n in t.formattedData)for(var s in t.formattedData[n])if(t.formattedData[n][s]){var r=t.formattedData[n][s];if(r.backlogData&&"完了"===r.backlogData.status.name){var i=r.userDulation[a]?r.backlogData.estimatedHours/r.totalDuration*r.userDulation[a]:0;o.estimation.complete=o.estimation.complete+i,o.achieve.complete=o.achieve.complete+(r.userDulation[a]||0)/1e3/3600}else if(r.backlogData){var c=r.userDulation[a]?r.backlogData.estimatedHours/r.totalDuration*r.userDulation[a]:0;o.estimation.uncomplete=o.estimation.uncomplete+c,o.achieve.uncomplete=o.achieve.uncomplete+(r.userDulation[a]||0)/1e3/3600}}e[a]=o})),e}}]),a}(y["d"]);function N(t,e){return q.apply(this,arguments)}function q(){return q=Object(m["a"])(regeneratorRuntime.mark((function t(e,a){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("fetchBacklogStatus"),"noProject"!==e){t.next=3;break}return t.abrupt("return",null);case 3:if(!P.getApiToken||"-"===a||"-"===e){t.next=11;break}return t.next=6,D.a.get(P.getWorkSpaceURL+"/api/v2/issues/"+e+"-"+a,{params:{apiKey:P.getApiToken}}).catch((function(t){console.warn(t)}));case 6:if(o=t.sent,console.log(o),o){t.next=10;break}return t.abrupt("return",null);case 10:return t.abrupt("return",o.data);case 11:case"end":return t.stop()}}),t)}))),q.apply(this,arguments)}Object(l["a"])([y["c"]],A.prototype,"setRequest",null),Object(l["a"])([y["c"]],A.prototype,"updateRequest",null),Object(l["a"])([y["c"]],A.prototype,"setApiToken",null),Object(l["a"])([y["c"]],A.prototype,"setResponse",null),Object(l["a"])([y["c"]],A.prototype,"setAllState",null),Object(l["a"])([y["c"]],A.prototype,"setLoading",null),Object(l["a"])([y["c"]],A.prototype,"setYear",null),Object(l["a"])([y["c"]],A.prototype,"setPeriod",null),Object(l["a"])([y["c"]],A.prototype,"activateInstance",null),Object(l["a"])([y["c"]],A.prototype,"addBacklogResponse",null),Object(l["a"])([y["c"]],A.prototype,"stopFetch",null),Object(l["a"])([y["a"]],A.prototype,"recover",null),Object(l["a"])([y["a"]],A.prototype,"doRequest",null),Object(l["a"])([y["a"]],A.prototype,"fetchBacklogStatus",null),A=Object(l["a"])([Object(y["b"])({dynamic:!0,store:O,name:x,namespaced:!0})],A);var I=Object(y["e"])(A),U=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(h["a"])(a,[{key:"created",value:function(){}},{key:"submit",value:function(){this.$modal.pop()}},{key:"togglApiToken",get:function(){return I.getApiToken},set:function(t){I.setApiToken(t)}},{key:"backlogApiToken",get:function(){return P.getApiToken},set:function(t){P.setApiToken(t)}},{key:"backlogWorkSpaceURL",get:function(){return P.getWorkSpaceURL},set:function(t){P.setWrokSpaceURL(t)}},{key:"toggleWorkSpaceId",get:function(){return I.getRequest.workspace_id},set:function(t){I.updateRequest({workspace_id:t})}},{key:"year",get:function(){return I.getYear},set:function(t){I.setYear(t)}},{key:"period",get:function(){return I.getPeriod},set:function(t){I.setPeriod(t)}},{key:"useLocalStorage",get:function(){return f.useLocalStorage},set:function(t){f.useLocalStorage=t}}]),a}(u["b"]);U=Object(l["a"])([Object(u["a"])({components:{}})],U);var E=U,W=E,B=(a("cf97"),a("2877")),$=Object(B["a"])(W,p,g,!1,null,"bdc430a4",null),H=$.exports,F=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return a}(u["b"]);F=Object(l["a"])([Object(u["a"])({components:{Config:H}})],F);var Y=F,M=Y,z=(a("5c0b"),Object(B["a"])(M,n,s,!1,null,null,null)),J=z.exports,K=a("8c4f"),G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"section"},[a("div",{staticClass:"field is-grouped"},[a("p",{staticClass:"control"},[a("button",{staticClass:"button is-primary",attrs:{id:"hoge"},on:{click:t.fetchToggl}},[t._v("fetch toggl")])]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-link",on:{click:t.fetchBacklog}},[t._v("fetch backlog")])]),a("p",{staticClass:"control"},[a("button",{staticClass:"button is-warn",on:{click:t.stopFetch}},[t._v("stop")])])]),a("section",[a("hr"),a("h3",{staticClass:"title"},[t._v("Total")]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("納品人日（納品済み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(t.totalTime.estimation.complete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（納品済み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(t.totalTime.achieve.complete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（未納品）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(t.totalTime.achieve.uncomplete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("予定人日（未納品込み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(t.totalTime.estimation.complete+t.totalTime.achieve.uncomplete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（合計）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(t.totalTime.achieve.complete+t.totalTime.achieve.uncomplete)))])])])]),a("hr")]),t._l(t.totalTimeByUser,(function(e,o){return a("section",{key:o},[a("hr"),a("h3",{staticClass:"title"},[t._v(t._s(o))]),a("nav",{staticClass:"level"},[a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("納品人日（納品済み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(e.estimation.complete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（納品済み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(e.achieve.complete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（未納品）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(e.achieve.uncomplete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("予定人日（未納品込み）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(e.estimation.complete+e.achieve.uncomplete)))])])]),a("div",{staticClass:"level-item has-text-centered"},[a("div",[a("p",{staticClass:"heading"},[t._v("実働人日（合計）")]),a("p",{staticClass:"title"},[t._v(t._s(t.hourToNinnichi(e.achieve.complete+e.achieve.uncomplete)))])])])]),a("hr")])})),t.togglLoading?a("progress",{staticClass:"progress is-small is-primary",attrs:{max:"100"}},[t._v("15%")]):0===t.response.length?[a("h3",{staticClass:"title"},[t._v("No Data")]),a("p",[t._v("please check your "),a("a",{on:{click:function(e){return t.$modal.push("config")}}},[t._v("configrations")]),t._v(".")])]:a("div",{staticClass:"content"},[a("table",{staticClass:"table is-bordered is-striped is-narrow"},[t._l(t.formattedData,(function(e,o){return["noProject"!==o?[a("h4",{key:o+"h4"},[t._v(t._s(o))]),a("tbody",{key:o+"tbody"},[t._m(0,!0),t._l(e,(function(e,n){return a("tr",{key:n,staticClass:"is-danger"},["noProject"!==o?a("td",[e.backlogURL?a("a",{attrs:{href:e.backlogURL,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(o+"-"+n))]):a("span",[t._v(" -")])]):t._e(),a("td",[t._v(" "+t._s(e.raw[0].description)+" ")]),a("td",[t._v(" "+t._s(e.backlogData&&e.backlogData.estimatedHours?e.backlogData.estimatedHours+"時間":"-")+" ")]),a("td",[t._v(" "+t._s(e.ninnichi)+" ")]),a("td",[e.parentURL?a("a",{attrs:{href:e.parentURL,target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(e.parent))]):a("span",[t._v(t._s(e.parent))])]),a("td",[t._v(" "+t._s(e.backlogData&&e.backlogData.status?e.backlogData.status.name:"-")+" ")]),a("td",[e.noEstimatedHours?a("a",{staticClass:"button is-info"},[t._v(" Nodata ")]):e.timeOverTwice?a("a",{staticClass:"button is-danger"},[t._v(" Danger ")]):e.timeOver?a("a",{staticClass:"button is-warning"},[t._v(" Warning ")]):a("a",{staticClass:"button is-success"},[t._v(" Good ")])])])}))],2)]:t._e()]})),a("h4",[t._v("該当プロジェクトなし")]),a("tbody",[t._m(1),t._l(t.formattedData.noProject,(function(e,o){return a("tr",{key:o},[a("td",[t._v("-")]),a("td",[t._v(" "+t._s(e.raw[0].description)+" ")]),a("td",[t._v(" "+t._s(e.raw[0].dur)+" ")]),a("td",[t._v("-")])])}))],2)],2),a("div")])],2)])},Q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v(" チケット ")]),a("th",[t._v(" description ")]),a("th",[t._v("予定時間")]),a("th",[t._v("実時間")]),a("th",[t._v("親課題")]),a("th",[t._v("状態")]),a("th",[t._v("結果")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v(" チケット ")]),a("th",[t._v(" description ")]),a("th",[t._v("実時間")]),a("th",[t._v("親課題")])])}],V=function(t){Object(i["a"])(a,t);var e=Object(c["a"])(a);function a(){return Object(r["a"])(this,a),e.apply(this,arguments)}return Object(h["a"])(a,[{key:"hourToNinnichi",value:function(t){return(t/8).toFixed(1)+"日"}},{key:"created",value:function(){I.setLoading(!1)}},{key:"fetchToggl",value:function(){I.doRequest()}},{key:"fetchBacklog",value:function(){I.fetchBacklogStatus()}},{key:"stopFetch",value:function(){I.stopFetch()}},{key:"togglApiToken",get:function(){return I.getApiToken},set:function(t){I.setApiToken(t)}},{key:"toggleWorkSpaceId",get:function(){return I.getRequest.workspace_id},set:function(t){I.updateRequest({workspace_id:t})}},{key:"response",get:function(){return I.getResponse}},{key:"formattedData",get:function(){return I.formattedData}},{key:"useLocalStorage",get:function(){return f.useLocalStorage},set:function(t){f.useLocalStorage=t}},{key:"togglLoading",get:function(){return I.getLoading}},{key:"totalTime",get:function(){return I.totalTime}},{key:"totalTimeByUser",get:function(){return I.totalTimeByUser}}]),a}(u["b"]);V=Object(l["a"])([Object(u["a"])({components:{}})],V);var X=V,Z=X,tt=(a("36ba"),Object(B["a"])(Z,G,Q,!1,null,"6e5bbe07",null)),et=tt.exports;o["a"].use(K["a"]);var at=new K["a"]({mode:"history",base:"",routes:[{path:"/",name:"home",component:et},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]});function ot(){console.log("initialization start");var t=f.useLocalStorage?window.localStorage["toggl-backlog-aggregator-state"]:window.sessionStorage["toggl-backlog-aggregator-state"];if(console.log(t),t){var e=t?JSON.parse(t):null;console.log(e),I.recover(e),P.recover(e)}}var nt=a("95a5"),st=(a("7d35"),a("ecee")),rt=a("c074"),it=a("b702"),ct=a("f2d1"),lt=a("ad3d");st["c"].add(rt["a"],it["a"],ct["a"]),o["a"].component("font-awesome-icon",lt["a"]),o["a"].use(nt["a"]),o["a"].config.productionTip=!1,ot(),new o["a"]({router:at,store:O,render:function(t){return t(J)}}).$mount("#app")},cf97:function(t,e,a){"use strict";var o=a("8480"),n=a.n(o);n.a}});
//# sourceMappingURL=app.8a4a2c8c.js.map